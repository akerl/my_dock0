---
paths:
  device: /dev/xvdc
  mount: /mnt/dock0
  build_file: /mnt/dock0/root.fs
  build: ./build
  package_list: ./packages
  overlay: ./overlay
  scripts: ./scripts
root_size: 4096
fs:
  type: ext4
  flags: -F
lvm:
  device: /dev/xvdd
  name: dock0
  lvs:
    cowland:
      size: 3G
      fs: ext4
    docker:
      size: 10G
      fs: btrfs
domain: a-rwx.org
admin_email: admin@lesaker.org
kernel:
  version: 3.16-rc4_1
  initcpio_helpers: ./initcpio
  modules: 'base,udev,lvm2,dock0'
  options:
    root: /dev/xvda
    cow_dev: /dev/dock0/cowland
cleanup:
  users:
    - ftp
    - http
  paths:
    - srv/ftp
    - srv/http
    - etc/systemd/system/getty.target.wants/getty@tty1.service
    - etc/skel/.bashrc
    - etc/skel/.bash_logout
    - etc/skel/.bash_profile
    - etc/pacman.d/gnupg/pubring.gpg~
templates:
  - etc/mail/exim.conf
  - etc/mail/aliases
  - etc/hostname
  - etc/hosts
  - etc/netctl/main
commands:
  chroot:
    - curl -sLo /usr/local/bin/nsinit https://github.com/dock0/nsinit/releases/download/latest/nsinit
    - chmod a+x /usr/local/bin/nsinit
    - curl -sLo /tmp/aufs-util.tar.xz https://github.com/dock0/aufs-util/releases/download/latest/aufs-util.tar.xz
    - tar -xf /tmp/aufs-util.tar.xz -C / --keep-directory-symlink
    - rm -f /tmp/aufs-util.tar.xz
...
